/*
 *
 * Layouts - Card
 *
 */

.card
  display: flex
  flex-direction: column
  flex: 1
  align-items: stretch
  background-color: $light
  color: $default
  margin: 0 $gap
  padding: $gap
  border-radius: $border-radius
  //overflow: hidden
  cursor: pointer
  +shadow(3)
  .head,
  .foot
    flex-shrink: 0
    padding: $gap
    min-height: 50px
    +mobile
      padding: $gap 0
  .body
    flex-grow: 1
    flex-shrink: 0
    padding: $gap
    line-height: 1.3
    //text-align: justify
    +mobile
      padding: $gap 0
  .title
    margin: 0
  @each $key, $values in $colors
    $color: nth($values, 1)
    $inverse: nth($values, 2)
    &.bg-#{$key}
      background-color: $color
      color: $inverse
      &.gradient
        background-image: linear-gradient(225deg, lighten($color,5%) 0%, $color 71%, darken($color,5%) 100%)

  &.with-image
    padding: 0px
    .image
      backface-visibility: hidden
      overflow: hidden
      img
        position: relative
        display: block
        opacity: 0.85
      figcaption
        position: absolute
        border-radius: $border-radius
        top: 0
        left: 0
        width: 100%
        height: 100%
        display: flex
        flex-direction: column
        z-index: 12
        text-transform: uppercase
        & > .head, & > .body, & > .foot
          display: flex
          justify-content: center
          flex-direction: column
          text-align: center
          align-items: center
          color: $light
          text-transform: uppercase
      .title
        color: $light
        font-weight: 300
        font-size: $font-large
        span
          font-weight: bold
      .subtitle, .link
        color: $light
        text-align: center
        font-size: $font-small
        padding: $gap 0
        width: 100%
      .link
        text-decoration: underline

  &.with-image.with-effect-one
    .image
      figcaption
        &:before
          position: absolute
          top: 0
          left: 0
          width: 100%
          height: 100%
          background: linear-gradient(rgba($dark,0) 0%, rgba($dark,0.5) 75%)
          content: ''
          opacity: 0
          transform: translate3d(0,50%,0)
          transition: opacity 0.35s, transform 0.35s
      .title
        color: $dark
        transition: transform 0.35s, color 0.35s
        //transform: translate3d(0,-50%,0)
        width: 100%
        margin-top: 25% //remove when foot is present
        &:after
          position: absolute
          bottom: -10px
          left: 70px
          right: 70px
          height: $border-size + 1px
          background: $light
          content: ''
          transition: transform 0.35s
          transform: translate3d(-200%,0,0)
      .subtitle, .link, .button
        opacity: 0
        transform: translate3d(0,10px,0)
        transition: opacity 0.35s, transform 0.35s
      .foot
        padding-top: 0
    &:hover figcaption:before
      opacity: 1
      transform: translate3d(0,0,0)
    &:hover .title
      color: $light
      transform: translate3d(0,-50%,0) translate3d(0,-40px,0)
    &:hover .title:after
      transform: translate3d(0,0,0)
    &:hover .subtitle, &:hover .link, &:hover .button
      opacity: 1
      transform: translate3d(0,0,0)

  &.with-image.with-effect-two
    .image
      img
        transition: opacity 1s, transform 1s
      figcaption
        text-align: left
      .title
        margin-top: 0
        color: $dark
      .subtitle
        display: inline-block
        margin: 0 0 0.25em
        padding: 0.4em 1em
        background: rgba($light, 0.9)
        color: $dark
        transition: opacity 0.35s, transform 0.35s
        transform: translate3d(-360px, 0, 0)
        width: auto
        &:first-child
          transition-delay: 0.15s
        &:nth-of-type(2)
          transition-delay: 0.1s
        &:nth-of-type(3)
          transition-delay: 0.05s
    &:hover img
      opacity: 1
      transform: scale3d(1.1, 1.1, 1)
    &:hover .subtitle
      transform: translate3d(0, 0, 0)

  &.with-image.with-effect-three
    .image
      background-color: $dark
      img
        transition: transform 0.35s
      figcaption
        text-align: left
      .title
        position: absolute
        bottom: 0
        left: 0
        padding: 30px
        transition: transform 0.35s
      .foot
        opacity: 0
        background-color: $dark
        color: $light
        transition: opacity 0.35s, transform 0.35s
        transform: translate3d(0, 100%, 0)
        align-items: flex-start
      .subtitle
        text-align: left
        width: auto
        margin: 0 0 0 20px
    &:hover img
      transform: translate3d(0, -80px, 0)
      border-bottom-left-radius: 0px
      border-bottom-right-radius: 0px
    &:hover .title
      transform: translate3d(0, -100px, 0)
    &:hover .foot
      opacity: 1
      transform: translate3d(0, 0, 0)

  &.with-image.with-effect-four
    .image
      img
        opacity: 0.95
        transition: transform 0.35s
        transform: scale3d(1.05, 1.05, 1)
      figcaption:before
        height: 100%
        background: rgba($light, 0.5)
        content: ''
        transition: transform 0.5s
        transform: scale3d(2.5, 1.4, 1) rotate3d(0, 0, 1, 45deg) translate3d(0, -100%, 0)
      .title
        position: absolute
        top: 20px
        right: 0
        padding: 30px
        transition: transform 0.35s
      .foot
        position: absolute
        right: 0
        bottom: 0
        margin: 30px
        padding: 0 10px
        border-right: 4px solid $light
        text-align: right
        opacity: 0
        transition: opacity 0.4s
    &:hover img
      opacity: 1
      transform: scale3d(1, 1, 1)
    &:hover figcaption:before
      transform: scale3d(2.5, 1.4, 1) rotate3d(0, 0, 1, 45deg) translate3d(0, 100%, 0)
    &:hover .foot
      opacity: 1
      transition-delay: 0.1s

  &.with-image.with-effect-five
    .image
      img
        opacity: 1
      figcaption:before
        position: absolute
        top: 0
        right: 20px
        left: 20px
        height: 80px
        background: $light
        content: ''
        transition: opacity 0.35s, transform 0.35s
        transform: translate3d(0, 70px, 0) scale3d(1, 0.05, 1)
        transform-origin: 50% 0
        +touch
          top: 25%
        +mobile
          top: 15%
      .title
        color: $dark
        transition: transform 0.35s
      .foot
        padding: 2.25em 0.5em
        font-weight: 600
        font-size: 100%
        line-height: 1.5
        opacity: 0
        transition: opacity 0.35s, transform 0.35s
        transform: translate3d(0, -10px, 0)
      .subtitle
        margin-top: -70px
        color: $dark
        +touch
          margin-top: -38%
        +mobile
          margin-top: -30%
    &:hover figcaption:before
      opacity: 0.8
      transform: translate3d(0, 5em, 0) scale3d(1, 1, 1)
    &:hover .foot
      opacity: 1
      transform: translate3d(0, 0, 0)

  &.with-image.with-effect-six
    .image
      img
        opacity: 1
      figcaption:before
        position: absolute
        top: 30px
        right: 30px
        bottom: 30px
        left: 30px
        border: 2px solid $light
        border-radius: $border-radius
        box-shadow: 0 0 0 50px rgba($light, 0.4)
        content: ''
        opacity: 0
        transition: opacity 0.35s, transform 0.35s
        transform: scale3d(1.4, 1.4, 1)
      .foot
        opacity: 0
        transition: opacity 0.35s, transform 0.35s
        transform: scale(1.5)
      .subtitle
        margin-top: -50px
    &:hover figcaption
      background-color: rgba(58, 52, 42, 0.2)
    &:hover figcaption:before
      opacity: 1
      transform: scale3d(1, 1, 1)
    &:hover .foot
      opacity: 1
      transform: scale3d(1, 1, 1)


  &.action
    @extend .card.with-image
    transition: 0.6s
    transform-style: preserve-3d
    position: relative
    background-color: transparent
    &.flipped
      transform: rotateY( 180deg )
      .image.front
        transform: rotateY( 0deg )
      .image.back
        .center:before, .center:after
          opacity: .9
          transform: scale(1)
    .image
      img
        position: relative
        display: block
        opacity: 0.85
      figcaption
        background-color: rgba($dark,0.2)
        backface-visibility: hidden
        .actions
          position: absolute
          top: 0px
          left: 0px
          &.bottom
            top: auto
            bottom: 0px
          &.right
            left: auto
            right: 0px
          &.center
            position: relative
            width: 100%
            height: 100%
            display: flex
            flex-direction: row
            justify-content: center
            align-items: center
        .hover-actions
          position: absolute
          display: flex
          justify-content: center
          top: auto
          bottom: 0
          padding: 20px 0
          height: 40px
          width: 100%
          text-align: center
          background: rgba($light,0.5)
          color: $dark
          border-bottom-left-radius: $border-radius
          border-bottom-right-radius: $border-radius
          transition: transform 0.35s
          transform: translate3d(0, 100%, 0)
          button, .button
            color: $dark
      &:hover figcaption .hover-actions
        transform: translate3d(0, 0, 0)
      &.front, &.back
        backface-visibility: hidden
      &.front
        z-index: 3
        transform: rotateY( 0deg )
      &.back
        position: absolute
        top: 0
        left: 0
        transform: rotateY( 180deg )
    @each $key, $values in $colors
      $color: nth($values, 1)
      &.with-ribbon.#{$key} .ribbon
        transition: color 0.4s ease-out
    &.flipped
      @each $key, $values in $colors
        $color: nth($values, 1)
        &.with-ribbon.#{$key} .ribbon
          color: $color
    &:not(.product)
      button, .button
        background-color: transparent
        border: none
        margin: 0
        color: $light
        i
          font-size: $font-large
          transition: all 0.3s cubic-bezier(0.34, 1.61, 0.7, 1)
        &:hover,&:focus
          i
            transform: scale(1.2)


  &.profile
    @extend .card.with-image
    @extend .card.action
    .image.front
      figcaption
        background: linear-gradient(rgba($light, 0) 0%, rgba($light, 0.4) 55%)
        .head
          height: 50%
          padding-bottom: 0
          .avatar
            width: 60%
            border-radius: 50%
            border: 4px solid $light
        .body
          margin-top: -10px
          padding-top: 0px
          hr
            width: 100px
            height: 3px
            margin: 10px auto
            border: 0
            background: $alert
            transition: all 0.6s cubic-bezier(0.34, 1.61, 0.7, 1)
          .name
            margin: 0
            padding: 0
          .job
            margin: 0
            padding: 0
            text-transform: none
            font-style: italic
        .foot
          .info
            display: flex
            width: 100%
            justify-content: center
            & > li
              color: $dark
              text-transform: none
              font-size: $font-base
              i
                color: $dark
                margin: 5px
    .image.back
      figcaption
        background-color: rgba($light,0.8)
        .body
          padding: 40px
          .description
            color: $dark
            font-size: $font-base
            text-transform: none
            text-align: left
    &:hover
      .image.front
          .body
            hr
              width: 200px


  &.blog
    @extend .card.with-image
    .image
      figcaption
        background-color: rgba($dark,0.5)
        &:before
          position: absolute
          top: 0
          left: 0
          width: 100%
          height: 100%
          background: linear-gradient(rgba($dark,0) 0%, rgba($dark,0.2) 75%)
          content: ''
          opacity: 0
          transform: translate3d(0,50%,0)
          transition: opacity 0.35s, transform 0.35s
        .head
          flex-grow: 2
          hr
            width: 100px
            height: 3px
            margin: 10px auto
            border: 0
            background: $alert
            transition: all 0.6s cubic-bezier(0.34, 1.61, 0.7, 1)
          .subtitle
            margin: 0
            padding: 0
            text-transform: none
            font-style: italic
        .body
          opacity: 0
          transform: translate3d(0,50%,0)
          transition: opacity 0.35s, transform 0.35s
          .description
            font-size: $font-small
            text-align: center
            text-transform: none
        .foot
          .info
            display: flex
            width: 100%
            justify-content: space-around
            & > li
              color: $light
              text-transform: none
              font-size: $font-small
              & > i
                margin-right: 5px
    &:hover
      .image
        figcaption
          &:before
            opacity: 1
            transform: translate3d(0,0,0)
          .head
            hr
              width: 200px
          .body
            opacity: 1
            transform: translate3d(0,0,0)


  &.product
    @extend .card.with-image
    @extend .card.action
    .image
      display: flex
      flex: 1
      figcaption
        background-color: transparent
        .head, .body
          padding: 0
          .info
            position: absolute
            background-color: rgba($default,0.5)
            border-top-right-radius: 0px
            border-bottom-left-radius: 0px
            height: 40px
            width: 40px
            top: 0px
            left: 0px
            border: none
            transform: translate3d(-100%, -100%, 0) translate3d(0, 0, 0)
            transition: all 0.6s cubic-bezier(0.2, 1, 0.3, 1)
            i
              color: $light
              font-size: 22px
            &:hover
              background-color: rgba($default,0.8)
        +mobile
          position: relative
      &.front
        figcaption
          text-transform: none
          .head
            img
              max-height: calc(100% - 90px)
              border-bottom-left-radius: 0px
              border-bottom-right-radius: 0px
              object-fit: cover
          .body
            //display: flex
            //flex-direction: row
            color: $dark
            border-top: thin solid rgba($dark, 0.1)
            //justify-content: stretch
            //justify-items: stretch
            //align-items: stretch
            min-height: 89px
            display: block
            .cart-actions
              width: 200%
              display: inline-flex
              transition: all 0.6s cubic-bezier(0.2, 1, 0.3, 1)
              .left
                height: 100%
                width: 50%
                display: flex
                flex: 1
                .details
                  width: calc(100% - 90px)
                  text-align: left
                  padding: 0 15px
                  align-content: center
                  justify-content: center
                  flex-direction: column
                  display: flex
                  flex: 1
                  .name
                    text-transform: none
                    font-weight: bold
                    font-size: 20px
                    line-height: 20px
                    margin: 0
                  .price
                    margin-top: 5px
                    margin-bottom: 0
                    color: $primary
                    .full
                      text-decoration: line-through
                      color: lighten($default, 20%)
                      font-size: 12px
                .buy
                  border-left: thin solid rgba($dark, 0.1)
                  width: 89px
                  height: 92px
                  position: relative
                  +transition(background-color)
                  &:before, &:after
                    position: absolute
                    bottom: 30px
                    right: 44px
                    content: ' '
                    height: 30px
                    width: 2px
                    background-color: rgba($dark, 0.2)
                  &:before
                    transform: rotate(0deg)
                  &:after
                    transform: rotate(90deg)
                  &:hover
                    background-color: lighten($primary,10%)
              .right
                width: 50%
                float:right
                height: 200%
                display: flex
                flex: 1
                overflow: hidden
                .message
                  background-color: $primary
                  width: calc(100% - 90px)
                  text-align: left
                  padding: 0 15px
                  align-content: center
                  justify-content: center
                  flex-direction: column
                  display: flex
                  flex: 1
                  .name
                    text-transform: none
                    font-weight: bold
                    font-size: 20px
                    line-height: 20px
                    margin: 0
                    color: $light
                  .text
                    text-transform: none
                    font-size: 14px
                    line-height: 14px
                    margin-top: 5px
                    margin-bottom: 0
                    color: $light
                .remove
                  position: relative
                  border-right: thin solid rgba($dark, 0.1)
                  width: 89px
                  height: 92px
                  background-color: $primary
                  +transition(background-color)
                  &:before, &:after
                    position: absolute
                    content: ' '
                    width: 2px
                    background-color: rgba($light, 0.5)
                  &:before
                    bottom: 34px
                    right: 37px
                    height: 26px
                    transform: rotate(45deg)
                  &:after
                    bottom: 35px
                    right: 50px
                    height: 14px
                    transform: rotate(135deg)
                  &:hover
                    background-color: $error
                    &:before, &:after
                      bottom: 30px
                      right: 44px
                      height: 30px

              &.added
                transform: translateX(-50%)
      &.back
        height: 100%
        width: 100%
        .body
          text-align: left
          color: $dark
          padding: 10px
          .name
            text-transform: none
            font-weight: bold
            font-size: 20px
            line-height: 20px
            margin: 0
          .subtitle
            margin: 5px 0
            padding: 0
            font-size: 13px
            color: lighten($default, 20%)
          .price
            margin-top: 0
            margin-bottom: 0
            color: $primary
            .full
              text-decoration: line-through
              color: lighten($default, 20%)
              font-size: 12px
          .product-details
            margin-bottom: 0
            text-transform: none
            tr
              border: none
              td
                text-transform: none
                font-size: 13px
                padding: 5px
                .tag
                  font-size: 13px
        .foot
          button, .button
    &:hover
      .image
        figcaption
          .head
            .info
              transform: translate3d(0, 0, 0) translate3d(0, 0, 0)






  &.feature
    background-color: $light
    min-height: 100px
    position: relative
    overflow: hidden
    justify-content: center
    align-items: center
    transition: all 0.3s ease-out
    text-decoration: none
    &:hover
      .overlay
        transform: scale(9) translateZ(0)
      .icon
        border-color: $light
        background-color: $default
        i
          color: $default
        &:after
          background-color: lighten($default,40%)
      .body, .body > h1, .body > h2, .body > h3
        z-index: 1
        color: $light
    .icon
      width: 100px
      height: 100px
      border-radius: 50%
      background: $light
      border: $border-size solid darken($default, 10%)
      display: flex
      justify-content: center
      align-items: center
      position: relative
      z-index: 1
      transition: all 0.3s ease-out
      &:after
        content: ""
        width: 90px
        height: 90px
        display: block
        position: absolute
        background: $default
        border-radius: 50%
        top: 5px
        left: 5px
        transition: opacity 0.3s ease-out
      i
        color: $light
        z-index: 100
        font-size: 40px
        transform: translateZ(0)
    .overlay
      width: 90px
      height: 90px
      border-radius: 50%
      background: $default
      margin: 20px auto
      z-index: 0
      transition: transform 0.3s ease-out
    @each $key, $values in $colors
      $color: nth($values, 1)
      $inverse: nth($values, 2)
      &.bg-#{$key}
        &:hover
          .icon
            border-color: $inverse
            background-color: $color
            i
              color: $color
            &:after
              background-color: lighten($color,40%)
          .body, .body > h1, .body > h2, .body > h3
            color: $inverse !important
        @if($key != 'light')
          .body, .body > h1, .body > h2, .body > h3
            color: $color !important
        .icon
          background: $inverse
          border: $border-size solid darken($color, 10%)
          &:after
            background: $color
          i
            color: $inverse
        .overlay
          background: $color
